import{_ as T,a as B}from"./apiLike.88192f99.js";import{_ as N,a as t,c as o,d as l,r as v,t as p,h as U,i as z,n as _,F as b,e as L,j as f,k as I,b as k,u as A,f as $,l as j,I as F,m as H}from"./index.3adf9de5.js";const S={},M={class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",stroke:"white","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},D=l("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},null,-1),E=[D];function O(m,i){return t(),o("svg",M,E)}var R=N(S,[["render",O]]);const q={class:"overflow-hidden rounded-lg border-2 border-black"},G=["onClick"],J=["src"],K={key:0,class:"absolute top-0 left-0 flex h-full w-full items-center justify-center bg-black bg-opacity-40"},Q={class:"text-3xl text-white"},W={props:{images:{type:Array,default(){return[]}}},setup(m){const i=m,c=v(!1),u=v(0),e=v(p(i.images).map(s=>s.url));U(i,s=>{e.value=p(s.images).map(n=>n.url)});const w=v(p(i.post));U(i,s=>{w.value=p(s.post)});const x=s=>{u.value=s,c.value=!0},a=()=>{c.value=!1};return(s,n)=>{const d=z("vue-easy-lightbox");return t(),o(b,null,[l("div",q,[l("div",{class:_(["grid gap-0",{"grid-cols-1":e.value.length<=2,"grid-cols-2":e.value.length==3,"grid-cols-3":e.value.length==4,"max-h-96 grid-flow-col grid-rows-6":e.value.length>=5}])},[(t(!0),o(b,null,L(e.value,(g,r)=>(t(),o(b,{key:g.id},[r<5?(t(),o("div",{key:0,onClick:y=>x(r),class:_(["cursor-pointer",{"col-span-2":e.value.length==3&&r==0,"col-span-3":e.value.length==4&&r==0,"row-span-3":e.value.length>=5&&r<2,"row-span-2":e.value.length>=5&&r>=2,relative:e.value.length>5&&r==4}])},[l("img",{src:g,class:_(["object-center",{"max-h-96":e.value.length==1,"max-h-48":e.value.length==2||e.value.length==3||e.value.length==4}])},null,10,J),e.value.length>5&&r==4?(t(),o("div",K,[l("span",Q,f(`+ ${e.value.length-5}`),1)])):I("",!0)],10,G)):I("",!0)],64))),128))],2)]),k(d,{visible:c.value,imgs:e.value,index:u.value,onHide:a},null,8,["visible","imgs","index"])],64)}}},X={class:"rounded-lg border-2 border-black bg-white p-6 shadow-post"},Y={class:"mb-4 whitespace-pre"},Z=["disabled"],ee={class:"mb-5 flex items-center"},se=l("div",{class:"flex w-full"},[l("input",{class:"w-full border-2 border-black",type:"text"}),l("button",{class:"inline-block w-full max-w-[128px] border-2 border-black bg-primary text-base text-white"}," \u7559\u8A00 ")],-1),le={class:"mb-4 whitespace-pre"},re={props:{post:{type:Object,default:()=>{}}},setup(m){const i=m,c=A(),u=v(!1),e=v(p(i.post));U(i,a=>{e.value=p(a.post)});const w=a=>{const s={posts:a};u.value=!0,B.toggle(s).then(()=>{u.value=!1,x(c.user.id)}).catch(n=>{u.value=!1,console.log(n)})},x=a=>{if(e.value.likes.includes(a)){const n=e.value.likes.findIndex(d=>d===a);e.value.likes.splice(n,1)}else e.value.likes.push(a)};return(a,s)=>{var n,d,g,r,y,C,P;return t(),o("div",X,[k(T,{class:"mb-4",imgUrl:(d=(n=e.value.userId)==null?void 0:n.avatar)==null?void 0:d.url,name:(g=e.value.userId)==null?void 0:g.name,userPageUrl:`/profile/${(r=e.value.userId)==null?void 0:r._id}`,subTitle:a.$filters.dateTime(e.value.createdAt)},null,8,["imgUrl","name","userPageUrl","subTitle"]),l("p",Y,f(e.value.content),1),((y=e.value.image)==null?void 0:y.length)>0?(t(),$(W,{key:0,images:e.value.image},null,8,["images"])):I("",!0),l("div",null,[l("button",{type:"button",class:_(["flex items-center justify-center py-5",{"cursor-not-allowed":u.value}]),onClick:s[0]||(s[0]=h=>w(e.value._id)),disabled:u.value},[(C=e.value.likes)!=null&&C.includes(j(c).user.id)?(t(),$(R,{key:1,class:"mr-2 h-5 w-5 text-primary"})):(t(),$(F,{key:0,class:"mr-2 h-5 w-5 text-primary"})),l("span",null,f((P=e.value.likes)==null?void 0:P.length),1)],10,Z)]),l("div",ee,[k(H,{class:"mx-2",size:"40",imgUrl:j(c).user.avatar},null,8,["imgUrl"]),se]),(t(!0),o(b,null,L(e.value.comments,(h,V)=>(t(),o("div",{class:"mb-4 rounded-lg bg-secondary px-4 py-5",key:V},[k(T,{class:"mb-4",imgUrl:h.avatar,name:h.userName,userPageUrl:"#",subTitle:h.createAt},null,8,["imgUrl","name","subTitle"]),l("p",le,f(h.content),1)]))),128))])}}};export{re as _};
