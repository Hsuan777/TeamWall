import{_ as $,a as C}from"./apiLike.8ed4e19c.js";import{_ as T,a as l,c as n,d as t,r as k,h as j,i as V,n as w,F as v,e as U,t as b,j as x,b as f,u as B,f as y,k as N,I as P,l as z}from"./index.c53ac51d.js";const A={},F={class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",stroke:"white","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},H=t("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},null,-1),S=[H];function L(s,c){return l(),n("svg",F,S)}var M=T(A,[["render",L]]);const D={class:"overflow-hidden rounded-lg border-2 border-black"},E=["onClick"],O=["src"],q={key:0,class:"absolute top-0 left-0 flex h-full w-full items-center justify-center bg-black bg-opacity-40"},G={class:"text-3xl text-white"},J={props:{images:{type:Array,default(){return[]}}},setup(s){const c=s,u=k(!1),m=k(0),e=k(c.images.map(r=>r.url));j(c.images,r=>{e.value=r.map(d=>d.url)});const o=r=>{m.value=r,u.value=!0},i=()=>{u.value=!1};return(r,d)=>{const p=V("vue-easy-lightbox");return l(),n(v,null,[t("div",D,[t("div",{class:w(["grid gap-0",{"grid-cols-1":e.value.length<=2,"grid-cols-2":e.value.length==3,"grid-cols-3":e.value.length==4,"max-h-96 grid-flow-col grid-rows-6":e.value.length>=5}])},[(l(!0),n(v,null,U(e.value,(g,a)=>(l(),n(v,{key:g.id},[a<5?(l(),n("div",{key:0,onClick:_=>o(a),class:w(["cursor-pointer",{"col-span-2":e.value.length==3&&a==0,"col-span-3":e.value.length==4&&a==0,"row-span-3":e.value.length>=5&&a<2,"row-span-2":e.value.length>=5&&a>=2,relative:e.value.length>5&&a==4}])},[t("img",{src:g,class:w(["object-center",{"max-h-96":e.value.length==1,"max-h-48":e.value.length==2||e.value.length==3||e.value.length==4}])},null,10,O),e.value.length>5&&a==4?(l(),n("div",q,[t("span",G,b(`+ ${e.value.length-5}`),1)])):x("",!0)],10,E)):x("",!0)],64))),128))],2)]),f(p,{visible:u.value,imgs:e.value,index:m.value,onHide:i},null,8,["visible","imgs","index"])],64)}}},K={class:"rounded-lg border-2 border-black bg-white p-6 shadow-post"},Q={class:"mb-4 whitespace-pre"},R={class:"mb-5 flex items-center"},W=t("div",{class:"flex w-full"},[t("input",{class:"w-full border-2 border-black",type:"text"}),t("button",{class:"inline-block w-full max-w-[128px] border-2 border-black bg-primary text-base text-white"}," \u7559\u8A00 ")],-1),X={class:"mb-4 whitespace-pre"},ee={props:{post:{type:Object,default(){return{}}}},emits:["get-posts"],setup(s,{emit:c}){const u=B(),m=e=>{const o={posts:e};C.toggle(o).then(()=>{c("get-posts")}).catch(i=>{console.log(i)})};return(e,o)=>{var i,r,d,p,g,a,_;return l(),n("div",K,[f($,{class:"mb-4",imgUrl:(r=(i=s.post.userId)==null?void 0:i.avatar)==null?void 0:r.url,name:(d=s.post.userId)==null?void 0:d.name,userPageUrl:`/profile/${(p=s.post.userId)==null?void 0:p._id}`,subTitle:e.$filters.dateTime(s.post.createdAt)},null,8,["imgUrl","name","userPageUrl","subTitle"]),t("p",Q,b(s.post.content),1),((g=s.post.image)==null?void 0:g.length)>0?(l(),y(J,{key:0,images:s.post.image},null,8,["images"])):x("",!0),t("div",null,[t("button",{type:"button",class:"flex items-center justify-center py-5",onClick:o[0]||(o[0]=h=>m(s.post._id))},[(a=s.post.likes)!=null&&a.includes(N(u).user.id)?(l(),y(M,{key:1,class:"mr-2 h-5 w-5 text-primary"})):(l(),y(P,{key:0,class:"mr-2 h-5 w-5 text-primary"})),t("span",null,b((_=s.post.likes)==null?void 0:_.length),1)])]),t("div",R,[f(z,{class:"mx-2",size:"40",imgUrl:"https://i.pravatar.cc/150?img=19"},null,8,["imgUrl"]),W]),(l(!0),n(v,null,U(s.post.comments,(h,I)=>(l(),n("div",{class:"mb-4 rounded-lg bg-secondary px-4 py-5",key:I},[f($,{class:"mb-4",imgUrl:h.avatar,name:h.userName,userPageUrl:"#",subTitle:h.createAt},null,8,["imgUrl","name","subTitle"]),t("p",X,b(h.content),1)]))),128))])}}};export{ee as _};
